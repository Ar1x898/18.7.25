<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Locked Gallery</title>
  <meta name="description" content="A simple, customizable locked gallery with click-to-reveal notes." />
  <style>
    :root{
      /* ==== THEME (edit freely) ==== */
      --bg: #0b0f14;
      --surface: #121821;
      --card: #0e141c;
      --edge: #1e293b;
      --text: #e5e7eb;
      --muted: #94a3b8;
      --accent: #5eead4;
      --accent-2: #60a5fa;
      --radius: 16px;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --maxw: 1200px;
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background: radial-gradient(1200px 900px at 20% -20%, #0b1320 0%, var(--bg) 60%);
      color: var(--text);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    .hidden { display: none !important; }

    header{
      position: sticky; top:0; z-index: 5;
      background: linear-gradient(0deg, #0b0f1400, #0b0f1490);
      backdrop-filter: blur(6px);
      border-bottom: 1px solid var(--edge);
    }
    .bar{
      max-width: var(--maxw);
      margin: 0 auto;
      padding: 14px 20px;
      display: flex; align-items: center; justify-content: space-between;
      gap: 12px;
    }
    .title{
      font-weight: 700; letter-spacing:.2px;
      display:flex; align-items:center; gap:10px;
    }
    .dot{ width:10px; height:10px; border-radius:50%; background: var(--accent); box-shadow: 0 0 9px var(--accent); }

    .btn{
      border: 1px solid var(--edge);
      background: linear-gradient(180deg, #0e1622, #0b1018);
      color: var(--text);
      border-radius: 999px; padding: 10px 14px;
      cursor: pointer; font-weight:600;
    }
    .btn:hover{ border-color:#334155; }
    .btn:active{ transform: translateY(1px); }

    main{ max-width: var(--maxw); margin: 28px auto; padding: 0 20px 40px; }

    .grid{
      display: grid;
      grid-template-columns: repeat(12, 1fr);
      gap: 16px;
    }
    @media (max-width: 1100px){ .grid{ grid-template-columns: repeat(8, 1fr);} }
    @media (max-width: 740px){ .grid{ grid-template-columns: repeat(4, 1fr);} }

    .card{
      grid-column: span 4;
      background: linear-gradient(180deg, #0d141e, var(--card));
      border: 1px solid var(--edge);
      border-radius: var(--radius);
      overflow: clip;
      box-shadow: var(--shadow);
      position: relative;
      transition: transform .2s ease, border-color .2s ease, box-shadow .2s ease;
      isolation: isolate;
    }
    .card:hover{ transform: translateY(-2px); border-color:#2a3a52; box-shadow: 0 16px 40px rgba(0,0,0,.45); }
    .card img{
      width:100%; height: 220px; display:block; object-fit: cover; background:#0a0f16;
      user-select: none; -webkit-user-drag: none;
    }
    .card .controls{
      display:flex; align-items:center; justify-content: space-between; gap:8px;
      padding: 10px 12px;
      border-top: 1px solid var(--edge);
      background: linear-gradient(180deg, #0b1119, #0a0f16);
    }
    .label{
      font-size: 14px; color: var(--muted);
      overflow: hidden; text-overflow: ellipsis; white-space: nowrap;
    }
    .note-toggle{
      border: 1px solid var(--edge);
      background: linear-gradient(180deg, #0f172a, #0b1020);
      color: var(--text);
      border-radius: 10px; padding:8px 10px; font-weight:600; cursor:pointer;
    }
    .note-toggle:hover{ border-color:#334155;}
    .note{
      position:absolute; inset:auto 10px 10px 10px;
      background: linear-gradient(180deg, rgba(3,7,18,.96), rgba(15,23,42,.96));
      border:1px solid #334155;
      border-radius: 12px;
      padding: 12px 14px;
      box-shadow: 0 10px 30px rgba(0,0,0,.5);
      transform: translateY(6px);
      transition: opacity .18s ease, transform .18s ease;
    }
    .note[hidden]{ opacity:0; transform: translateY(12px); pointer-events: none; }
    .note p{ margin:0; line-height: 1.45; color: #e2e8f0; }
    .note small{ color: var(--muted); display:block; margin-top:8px; }

    /* ==== ACCESS GATE ==== */
    .gate {
      position: fixed;
      inset: 0;
      z-index: 9999;
      display: grid;
      place-items: center;
      background: url('https://github.com/Ar1x898/18.7.25/raw/main/binary.jpg') center/cover no-repeat;
      font-family: 'Courier New', Courier, monospace;
      color: #00ffcc;
      text-shadow: 0 0 5px #00ffcc;
      padding: 20px;
    }

    .panel {
      width: min(560px, 92vw);
      background: rgba(0, 0, 0, 0.8);
      border: 1px solid #00ffcc;
      border-radius: 12px;
      box-shadow: 0 0 20px #00ffccaa;
      padding: 24px;
    }

    body {
      background: url('https://github.com/Ar1x898/18.7.25/raw/main/1month.jpg') center/cover no-repeat;
      color: #5c3d4c;
      font-family: 'Georgia', serif;
    }

    .card .lock-icon {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 2rem;
      color: #fff;
      background: rgba(0, 0, 0, 0.5);
      border-radius: 50%;
      padding: 10px;
      cursor: pointer;
      z-index: 10;
      display: block;
    }

    .card.unlocked .lock-icon {
      display: none; /* Hide the lock icon when the card is unlocked */
    }

    .card.unlocked img {
      filter: none;
    }
  </style>
</head>
<body>

<noscript>
  This site needs JavaScript to run. Enable JS to enter your access code and see the gallery.
</noscript>

<!-- ===== ACCESS GATE ===== -->
<div id="gate" class="gate" aria-labelledby="gateTitle">
  <div class="panel" id="gatePanel">
    <h1 id="gateTitle">Enter the access code</h1>
    <p class="sub">Only the person given this link personally should be able to open this! Or else keep out!!!</p>
    <form id="gateForm" autocomplete="off">
      <div class="field">
        <input id="pass" type="password" inputmode="text" placeholder="Access code" aria-label="Access code" required />
        <button class="unlock" type="submit">Unlock</button>
      </div>
      <div id="gateMsg" class="msg" role="alert" aria-live="polite"></div>
    </form>
  </div>
</div>

<!-- ===== APP ===== -->
<header>
  <div class="bar">
    <div class="title"><span class="dot" aria-hidden="true"></span> <span id="siteTitle">Locked Gallery</span></div>
    <div class="actions">
      <button class="btn" id="lockBtn" title="Lock">Lock</button>
    </div>
  </div>
</header>

<main id="app" class="hidden" tabindex="-1">
  <section aria-label="Image notes gallery">
    <div id="gallery" class="grid" role="list"></div>
  </section>
</main>

<script>
  const CONFIG = {
    siteTitle: "1 Month Anniversary",
    clickAnywhereToToggle: true,
    rememberHours: 24,
    images: [
      { src: "https://github.com/Ar1x898/18.7.25/raw/main/assets/photo1.jpg", alt: "Memory 1", label: "Photo #1", note: "This is an example note." },
      { src: "https://github.com/Ar1x898/18.7.25/raw/main/assets/photo2.jpg", alt: "Memory 2", label: "Photo #2", note: "Another note for your image." },
      { src: "https://github.com/Ar1x898/18.7.25/raw/main/assets/photo3.jpg", alt: "Memory 3", label: "Photo #3", note: "Click again to hide this note." },
    ],
    passwordHashes: [
      "3976306e17c6d9bff19e990aa442e0b6ba233ea4b1854bde1e9d1abf7b036558"
    ]
  };

  function el(tag, attrs={}, ...children){
    const node = document.createElement(tag);
    for (const [k,v] of Object.entries(attrs)){
      if (v === null || v === undefined) continue;
      if (k === 'class') node.className = v;
      else if (k.startsWith('on') && typeof v === 'function') node.addEventListener(k.slice(2), v);
      else node.setAttribute(k, v);
    }
    for (const c of children){
      if (c == null) continue;
      node.appendChild(typeof c === 'string' ? document.createTextNode(c) : c);
    }
    return node;
  }

  function buildGallery(items){
    const list = document.getElementById('gallery');
    list.innerHTML = '';

    items.forEach((it, i) => {
      const noteId = `note-${i}`;
      const img = el('img', { src: it.src, alt: it.alt });
      const lockIcon = el('div', { class: 'lock-icon' }, '?');
      const btn = el('button', { class: 'note-toggle', 'aria-controls': noteId, 'aria-expanded': 'false', type: 'button' }, 'Show note');
      const label = el('div', { class: 'label', title: it.label }, it.label);
      const controls = el('div', { class: 'controls' }, label, btn);
      const note = el('figcaption', { class: 'note', id: noteId, hidden: true }, el('p', {}, it.note));

      const card = el('figure', { class: 'card', role: 'listitem' }, img, lockIcon, controls, note);

      lockIcon.addEventListener('click', () => {
        card.classList.add('unlocked');
        lockIcon.style.display = 'none';
      });

      function toggleNote(){
        const willShow = note.hidden;
        note.hidden = !willShow;
        btn.setAttribute('aria-expanded', String(willShow));
        btn.textContent = willShow ? 'Hide note' : 'Show note';
      }

      btn.addEventListener('click', toggleNote);

      list.appendChild(card);
    });
  }

  function showApp(){
    gate.style.display = 'none';
    app.classList.remove('hidden');
    app.focus({ preventScroll: true });
  }

  function showGate(){
    gate.style.display = 'grid';
    app.classList.add('hidden');
    passInput.value = '';
    gateMsg.textContent = '';
    setTimeout(() => passInput.focus(), 0);
  }

  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    const pw = passInput.value.trim();
    if (!pw) return;
    const hex = await sha256Hex(pw);
    if (CONFIG.passwordHashes.includes(hex)) {
      setRemembered(hex);
      showApp();
    } else {
      gateMsg.textContent = "Incorrect code. Try again.";
      panel.classList.remove('shake');
      void panel.offsetWidth;
      panel.classList.add('shake');
    }
  });

  document.getElementById('lockBtn').addEventListener('click', () => {
    clearRemember();
    showGate();
  });

  (function init(){
    buildGallery(CONFIG.images);
    if (hasValidRemember()) showApp(); else showGate();
  })();
</script>

</body>
</html>

